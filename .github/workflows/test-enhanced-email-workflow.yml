name: ðŸ§ª Enhanced Program Status Email Workflow Test

on:
  workflow_dispatch:
    inputs:
      test_mode:
        description: 'Run in test mode'
        required: false
        default: 'true'
        type: boolean
      program_name:
        description: 'Program name for the status report'
        required: true
        default: 'Test Program'
        type: string
      report_type:
        description: 'Type of status report'
        required: true
        default: 'weekly'
        type: choice
        options:
          - weekly
          - monthly
          - sprint

jobs:
  test-enhanced-email:
    name: ðŸ§ª Test Enhanced Program Status Email Generation
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Checkout Repository
        uses: actions/checkout@v4
      
      - name: âœ… Run Enhanced Email Workflow in Test Mode
        run: |
          echo "ðŸ§ª Running enhanced email generation workflow in test mode"
          gh run list -w "Enhanced Program Status Email Workflow" --json conclusion,displayTitle,event -q '.[] | select(.event == "workflow_dispatch") | .'
          echo "Check above for execution of the Email Workflow in test mode"
        env:
          TEST_MODE: 'true'
          PROGRAM_NAME: ${{ github.event.inputs.program_name }}
          REPORT_TYPE: ${{ github.event.inputs.report_type }}
